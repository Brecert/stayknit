!function(e){"use strict";const t=[],n=e=>(n,o,r)=>{const a=!o.isConnected,d=e(n,o,r);if(Array.isArray(o)&&t.length&&(o=t.pop()),!(o instanceof Element||o instanceof DocumentFragment))return d;const i=c.tree.get(n),f=c.tree.get(o);if(!f)return d;const h=c.meta.has(o);if(i)h?i.add(o):f.forEach(e=>i.add(e));else{const e=h?new Set([o]):f;n.parentElement&&n!==document.body?(e=>{let t=n;for(;t=t.parentElement;){const n=c.tree.get(t);if(n)return void e.forEach(e=>n.add(e))}const o=c.tree.get(document.body);o?e.forEach(e=>o.add(e)):c.tree.set(document.body,e)})(e):c.tree.set(n,e)}return n.isConnected&&a&&s("onAttach",o),h||c.tree.delete(o),d},c={stack:[],tree:new WeakMap,meta:new WeakMap},o=e=>t=>{c.stack[c.stack.length-1].lifecycles[e]=t},r={onAttach:o("onAttach"),onDetach:o("onDetach"),sendHydrations:e=>{c.stack[c.stack.length-1].hydrations=e}},s=(e,t)=>{const n=t=>{const n=c.meta.get(t),o=n&&n.lifecycles[e];return o&&(o()),c.tree.get(t)},o=n(t);if(!o)return;const r=[o];for(;r.length>0;)r.shift().forEach(e=>{const t=n(e);t&&t.size>0&&r.push(t)})};e.callLifecycleForTree=s,e.ds=c,e.trace=e=>{var o,r,a;e.h=(o=e.h,(...e)=>{const n=e[0];if("function"!=typeof n){const n=o(...e);return n instanceof DocumentFragment&&t.push(n),n}const{name:r}=n,s={lifecycles:{},hydrations:{}};c.stack.push(s);const a=o(...e);return c.stack.pop(),a instanceof Node?(c.tree.has(a)||c.tree.set(a,new Set),c.meta.set(a,{fn:n,...s}),a instanceof Element?a.dataset.component=r:a.childNodes.forEach(e=>{e.dataset.component=r}),a):a}),e.insert=(r=e.insert,(e,t,n,c,o)=>r(e,t,n,c,o)),e.add=n(e.add),e.rm=(a=e.rm,(e,t,n)=>{if(e.isConnected){const o=c.tree.get(e);for(let e=t;e&&e!==n;e=e.nextSibling)s("onDetach",e),o&&o.delete(e)}return a(e,t,n)})},e.tree=r}({});
